<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Progress (progress.Progress)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">progress</a> &#x00BB; Progress</nav><h1>Module <code>Progress</code></h1><p>A library for displaying progress bars, including support for rendering multiple bars at once. Start by <a href="index.html#description"><span>describing</span></a> of a set of progress bars, then begin <a href="index.html#rendering"><span>rendering</span></a> them to get access to their respective reporting functions.</p><p>See <a href="../Progress_unix/index.html"><code>Progress_unix</code></a> for access to Unix-specific utilities.</p><nav class="toc"><ul><li><a href="#description">Description</a><ul><li><a href="#multiple-progress-bars">Multiple progress bars</a></li></ul></li><li><a href="#rendering">Rendering</a></li><li><a href="#miscellaneous">Miscellaneous</a></li></ul></nav></header><section><header><h2 id="description"><a href="#description" class="anchor"></a>Description</h2></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'a t</span></code></dt><dd><p>The type of progress bars with reporting functions of type <code>'a</code>. You'll get access to the reporting functions when beginning the <a href="index.html#rendering"><span>rendering</span></a> process.</p></dd></dl><dl><dt class="spec value" id="val-counter"><a href="#val-counter" class="anchor"></a><code><span class="keyword">val</span> counter : <span>total:int64</span> <span>&#45;&gt;</span> <span>?&#8288;mode:<span>[ `ASCII <span>| `UTF8</span> ]</span></span> <span>&#45;&gt;</span> <span>?&#8288;message:string</span> <span>&#45;&gt;</span> <span>?&#8288;pp:<span><span>(int64, <span>int64 <a href="Segment/index.html#type-t">Segment.t</a></span>)</span> <a href="Units/index.html#type-pp_fixed">Units.pp_fixed</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;width:int</span> <span>&#45;&gt;</span> <span>?&#8288;sampling_interval:int</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span><span>(int64 <span>&#45;&gt;</span> unit)</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>counter ~total ()</code> is a progress bar of the form:</p><pre><code class="ml">&lt;message?&gt;  &lt;count?&gt;  [########..............................]  XX% </code></pre><p>where each reported value contributes cumulatively towards an eventual total of <code>total</code>. Optional parameters are as follows:</p><ul><li><code>?mode</code> specifies whether to use a UTF-8 or an ASCII encoding for the progress bar. The UTF-8 encoding shows a higher resolution of progress, but may not be supported in all terminals. The default is <code>`ASCII</code>.</li></ul><ul><li><code>?pp</code> is used to pretty-print the <code>&lt;count&gt;</code> segment, if passed. For example, <a href="Units/index.html#val-bytes"><code>Units.bytes</code></a> can be used for totals measured in bytes. The default is to not display this segment.</li></ul><ul><li><code>?width</code> is the width of the bar in columns. Defaults to the width of <code>stdout</code>, if it is a terminal.</li></ul><ul><li><code>?sampling_interval</code> specifies the number of reported values that must be passed for each update of the display (not including the update during finalisation, which always occurs). This is useful when progress is being reported from a hot-loop, where the cost of re-displaying the progress bar is non-negligible. The default value is <code>1</code>, meaning that all updates are displayed immediately.</li></ul><p>See <a href="../Progress_unix/index.html#val-counter"><code>Progress_unix.counter</code></a> for an equivalent that contains a timer.</p></dd></dl><dl><dt class="spec module" id="module-Segment"><a href="#module-Segment" class="anchor"></a><code><span class="keyword">module</span> <a href="Segment/index.html">Segment</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p><code>Segment</code> contains a DSL for defining custom progress bars.</p></dd></dl><dl><dt class="spec value" id="val-make"><a href="#val-make" class="anchor"></a><code><span class="keyword">val</span> make : <span>init:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="Segment/index.html#type-t">Segment.t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> unit)</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Define a new progress bar from a specification, with the given initial value.</p></dd></dl><section><header><h3 id="multiple-progress-bars"><a href="#multiple-progress-bars" class="anchor"></a>Multiple progress bars</h3></header><dl><dt class="spec value" id="val-(/)"><a href="#val-(/)" class="anchor"></a><code><span class="keyword">val</span> (/) : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Stack progress bars vertically. <code>a / b</code> is a set with <code>a</code> stacked on top of <code>b</code>. The two bars have separate reporting functions (supplied as a pair).</p></dd></dl></section></section><section><header><h2 id="rendering"><a href="#rendering" class="anchor"></a>Rendering</h2></header><dl><dt class="spec value" id="val-with_reporters"><a href="#val-with_reporters" class="anchor"></a><code><span class="keyword">val</span> with_reporters : <span>?&#8288;ppf:Stdlib.Format.formatter</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p>Render a set of progress bars inside a continuation.</p><dl><dt>parameter ppf</dt><dd><p>Defaults to <span class="xref-unresolved" title="unresolved reference to &quot;Format.err_formatter&quot;"><code>Format</code>.err_formatter</span> if <code>stderr</code> is a TTY, and is a noop formatter otherwise.</p></dd></dl></dd></dl><aside><p>Functions for explicitly starting and stopping the process of rendering a bar; useful when the code doing the progress reporting cannot be conveniently delimited inside <code>with_display</code>. All <a href="index.html#type-display"><code>display</code></a>s must be properly <a href="index.html#val-finalise"><code>finalise</code></a>d, and it is not possible to interleave rendering of displays.</p></aside><dl><dt class="spec type" id="type-display"><a href="#type-display" class="anchor"></a><code><span class="keyword">type</span> display</code></dt></dl><dl><dt class="spec value" id="val-start"><a href="#val-start" class="anchor"></a><code><span class="keyword">val</span> start : <span>?&#8288;ppf:Stdlib.Format.formatter</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> * <a href="index.html#type-display">display</a></code></dt><dt class="spec value" id="val-finalise"><a href="#val-finalise" class="anchor"></a><code><span class="keyword">val</span> finalise : <a href="index.html#type-display">display</a> <span>&#45;&gt;</span> unit</code></dt></dl></section><section><header><h2 id="miscellaneous"><a href="#miscellaneous" class="anchor"></a>Miscellaneous</h2></header><dl><dt class="spec module" id="module-Units"><a href="#module-Units" class="anchor"></a><code><span class="keyword">module</span> <a href="Units/index.html">Units</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Helpers for printing values of various units.</p></dd></dl><dl><dt class="spec module" id="module-Internal"><a href="#module-Internal" class="anchor"></a><code><span class="keyword">module</span> <a href="Internal/index.html">Internal</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Internals of the library exported to be used in sibling packages and in testing. Not intended for public consumption, and does not provide a stable API.</p></dd></dl></section></div></body></html>