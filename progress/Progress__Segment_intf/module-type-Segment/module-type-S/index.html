<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>S (progress.Progress__Segment_intf.Segment.S)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../index.html">progress</a> &#x00BB; <a href="../../index.html">Progress__Segment_intf</a> &#x00BB; <a href="../index.html">Segment</a> &#x00BB; S</nav><h1>Module type <code>Segment.S</code></h1><nav class="toc"><ul><li><a href="#pre-provided-segments">Pre-provided segments</a></li><li><a href="#stateful">Stateful segments</a></li><li><a href="#boxes">Dynamically-sized segments</a></li><li><a href="#combining-segments">Combining segments</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'a t</span></code></dt><dd><p>The type of segments of progress bars that display reported values of type <code>'a</code>.</p></dd></dl><section><header><h3 id="pre-provided-segments"><a href="#pre-provided-segments" class="anchor"></a>Pre-provided segments</h3></header><dl><dt class="spec value" id="val-bar"><a href="#val-bar" class="anchor"></a><code><span class="keyword">val</span> bar : <span>mode:<span>[ `ASCII <span>| `UTF8</span> ]</span></span> <span>&#45;&gt;</span> <span>?&#8288;width:<span>[ <span>`Fixed of int</span> <span>| `Expand</span> ]</span></span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> float)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>bar ~width f</code> is a progress bar of the form:</p><pre><code class="ml">[#######################################................] </code></pre><p>which occupies <code>width</code>-many columns and uses <code>f</code> to determine the proportion of the bar that is filled.</p><p>If <code>~width:`Expand</code> is passed – which is the default – this segment must be contained inside a <a href="index.html#boxes"><span>box</span></a> that determines its size.</p></dd></dl><dl><dt class="spec value" id="val-const"><a href="#val-const" class="anchor"></a><code><span class="keyword">val</span> const : string <span>&#45;&gt;</span> <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>const s</code> is the segment that always displays <code>s</code>. <code>s</code> must not contain any newline characters.</p></dd></dl><dl><dt class="spec value" id="val-const_fmt"><a href="#val-const_fmt" class="anchor"></a><code><span class="keyword">val</span> const_fmt : <span>width:int</span> <span>&#45;&gt;</span> <span>(Stdlib.Format.formatter <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><a href="index.html#val-const_fmt"><code>const_fmt</code></a> is a variant of <a href="index.html#val-const"><code>const</code></a> that takes a fixed-width pretty-printer rather than a string.</p></dd></dl><dl><dt class="spec value" id="val-of_pp"><a href="#val-of_pp" class="anchor"></a><code><span class="keyword">val</span> of_pp : <span>width:int</span> <span>&#45;&gt;</span> <span>(Stdlib.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>of_pp ~width pp</code> is a segment that uses the supplied fixed-width pretty-printer to render the value. The pretty-printer must never emit newline characters.</p></dd></dl></section><section><header><h3 id="stateful"><a href="#stateful" class="anchor"></a>Stateful segments</h3></header><dl><dt class="spec value" id="val-periodic"><a href="#val-periodic" class="anchor"></a><code><span class="keyword">val</span> periodic : int <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>periodic n s</code> has the same output format as <code>s</code>, but only passes reported values down to <code>s</code> on every <code>n</code>-th call. This is useful when progress is being reported from a hot-loop, where the cost of rendering is non-negligible.</p></dd></dl><dl><dt class="spec value" id="val-accumulator"><a href="#val-accumulator" class="anchor"></a><code><span class="keyword">val</span> accumulator : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>accumulator combine zero s</code> has the same output format <code>s</code>.</p></dd></dl><dl><dt class="spec value" id="val-stateful"><a href="#val-stateful" class="anchor"></a><code><span class="keyword">val</span> stateful : <span>(unit <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>stateful f</code> is a segment that behaves as <code>f ()</code> for any given render, allowing <code>f</code> to initialise any display state at the start of the rendering process.</p></dd></dl></section><section><header><h3 id="boxes"><a href="#boxes" class="anchor"></a>Dynamically-sized segments</h3></header><aside><p>Certain segments can have their size determined dynamically by being wrapped inside one of the following boxes:</p></aside><dl><dt class="spec value" id="val-box_dynamic"><a href="#val-box_dynamic" class="anchor"></a><code><span class="keyword">val</span> box_dynamic : <span>int Stdlib.ref</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>box w</code> is a box that wraps a dynamically-sized segment and sets it to have size <code>w</code>.</p></dd></dl><dl><dt class="spec value" id="val-box_winsize"><a href="#val-box_winsize" class="anchor"></a><code><span class="keyword">val</span> box_winsize : <span>fallback:int</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>A box that takes on the current size of the terminal (or <code>fallback</code> if stdout is not attached to a terminal.)</p></dd></dl><dl><dt class="spec value" id="val-box_fixed"><a href="#val-box_fixed" class="anchor"></a><code><span class="keyword">val</span> box_fixed : int <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>box-fixed n s</code> fixes the size of the dynamic segment <code>s</code> to be <code>n</code>.</p></dd></dl></section><section><header><h3 id="combining-segments"><a href="#combining-segments" class="anchor"></a>Combining segments</h3></header><dl><dt class="spec value" id="val-(++)"><a href="#val-(++)" class="anchor"></a><code><span class="keyword">val</span> (++) : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Horizontally join two segments of the same reported value type.</p></dd></dl><dl><dt class="spec value" id="val-list"><a href="#val-list" class="anchor"></a><code><span class="keyword">val</span> list : <span>?&#8288;sep:<span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Horizontally join a list of segments, with a given separator. <code>sep</code> defaults to <code>const &quot; &quot;</code>.</p></dd></dl><dl><dt class="spec value" id="val-pair"><a href="#val-pair" class="anchor"></a><code><span class="keyword">val</span> pair : <span>?&#8288;sep:<span>unit <a href="index.html#type-t">t</a></span></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Horizontally join a pair of segments consuming different reported values into a single segment that consumes a pair.</p></dd></dl><dl><dt class="spec value" id="val-using"><a href="#val-using" class="anchor"></a><code><span class="keyword">val</span> using : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>using f s</code> is a segment that first applies <code>f</code> to the reported value and then behaves as segment <code>s</code>.</p></dd></dl></section></div></body></html>